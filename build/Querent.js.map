{"version":3,"file":"Querent.js","sources":["../src/Querent.js"],"sourcesContent":["// Define Object.entries which is part of the ES2017 spec\nObject.entries = x =>\n  Object.keys(x).reduce((y, z) =>\n    y.push([z, x[z]]) && y, [])\n\nconst query = (collection, query) =>\n  collection.filter(object => matches(object, query))\n\nconst matches = (object, query) =>\n  every(query, (key, value) =>\n    evaluate(object[key], value))\n\nconst every = (object, iteratee) =>\n  Object.entries(object).every(([key, value]) => iteratee(key, value))\n\nconst evaluate = (prop, value) => {\n  if (Array.isArray(value))\n    return value.includes(prop)\n\n  if (value instanceof Object)\n    return every(value, (key, value) => predicate(prop, key, value))\n\n  return value === prop\n}\n\nconst predicate = (prop, key, value) => {\n  switch (key) {\n    case '!': return !evaluate(prop, value)\n    case '<': return prop < value\n    case '<=': return prop <= value\n    case '>': return prop > value\n    case '>=': return prop >= value\n    default: return evaluate(prop[key], value)\n  }\n}\n\nconst Querent = {\n  query,\n  matches,\n  every,\n  evaluate,\n  predicate,\n}\n\nexport default Querent\n"],"names":["Object","entries","keys","x","reduce","y","z","push","query","collection","filter","matches","object","every","key","value","evaluate","iteratee","prop","Array","isArray","includes","predicate","Querent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACAA,OAAOC,OAAP,GAAiB;SACfD,OAAOE,IAAP,CAAYC,CAAZ,EAAeC,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ;WACpBD,EAAEE,IAAF,CAAO,CAACD,CAAD,EAAIH,EAAEG,CAAF,CAAJ,CAAP,KAAqBD,CADD;GAAtB,EAC0B,EAD1B,CADe;CAAjB;;AAIA,IAAMG,QAAQ,eAACC,UAAD,EAAaD,MAAb;SACZC,WAAWC,MAAX,CAAkB;WAAUC,QAAQC,MAAR,EAAgBJ,MAAhB,CAAV;GAAlB,CADY;CAAd;;AAGA,IAAMG,UAAU,SAAVA,OAAU,CAACC,MAAD,EAASJ,KAAT;SACdK,MAAML,KAAN,EAAa,UAACM,GAAD,EAAMC,KAAN;WACXC,SAASJ,OAAOE,GAAP,CAAT,EAAsBC,KAAtB,CADW;GAAb,CADc;CAAhB;;AAIA,IAAMF,QAAQ,SAARA,KAAQ,CAACD,MAAD,EAASK,QAAT;SACZjB,OAAOC,OAAP,CAAeW,MAAf,EAAuBC,KAAvB,CAA6B;;QAAEC,GAAF;QAAOC,KAAP;;WAAkBE,SAASH,GAAT,EAAcC,KAAd,CAAlB;GAA7B,CADY;CAAd;;AAGA,IAAMC,WAAW,SAAXA,QAAW,CAACE,IAAD,EAAOH,KAAP,EAAiB;MAC5BI,MAAMC,OAAN,CAAcL,KAAd,CAAJ,EACE,OAAOA,MAAMM,QAAN,CAAeH,IAAf,CAAP;;MAEEH,iBAAiBf,MAArB,EACE,OAAOa,MAAME,KAAN,EAAa,UAACD,GAAD,EAAMC,KAAN;WAAgBO,UAAUJ,IAAV,EAAgBJ,GAAhB,EAAqBC,KAArB,CAAhB;GAAb,CAAP;;SAEKA,UAAUG,IAAjB;CAPF;;AAUA,IAAMI,YAAY,SAAZA,SAAY,CAACJ,IAAD,EAAOJ,GAAP,EAAYC,KAAZ,EAAsB;UAC9BD,GAAR;SACO,GAAL;aAAiB,CAACE,SAASE,IAAT,EAAeH,KAAf,CAAR;SACL,GAAL;aAAiBG,OAAOH,KAAd;SACL,IAAL;aAAkBG,QAAQH,KAAf;SACN,GAAL;aAAiBG,OAAOH,KAAd;SACL,IAAL;aAAkBG,QAAQH,KAAf;;aACKC,SAASE,KAAKJ,GAAL,CAAT,EAAoBC,KAApB,CAAP;;CAPb;;AAWA,IAAMQ,UAAU;cAAA;kBAAA;cAAA;oBAAA;;CAAhB;;;;;;;;"}